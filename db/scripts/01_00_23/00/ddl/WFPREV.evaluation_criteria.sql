/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 12.0 		*/
/*  Created On : 25-Jun-2025 3:32:22 PM 				*/
/*  DBMS       : PostgreSQL 						*/
/* ---------------------------------------------------- */

/* Create Tables */

CREATE TABLE "wfprev"."evaluation_criteria"
(
	"evaluation_criteria_guid" UUID NOT NULL,    -- evaluation_criteria_guid is a unique identifier for the record.
	"project_type_code" varchar(10)	 NOT NULL,    -- project_type_code: Is a foreign key to project_type_code: Project Type Code defines the type of the project.  Values are:   	- Fuel Management  	- Cultural & Prescribed Fire
	"criteria_label" varchar(300)	 NOT NULL,    -- Criteria Label is a brief statement of a fire prevention objective that is being evaluated.
	"system_start_timestamp" TIMESTAMP NOT NULL,    -- System Start Timestamp is the date and time with millisecond accuracy when the record becomes effective.   The System Start Timestamp and System End Timestamp fields are managed as a set by the system and is not exposed to the end user. When an update is made to the data in the record, the system will be responsible for expiring the old record and creating a new record with the updated data. 
	"system_end_timestamp" TIMESTAMP NOT NULL,    -- System End Timestamp is the date and time with millisecond accuracy when the record becomes effective. The current instance of the record will be set to Dec 31, 9999 by default.  The System Start Timestamp and System End Timestamp fields are managed as a set by the system and is not exposed to the end user. When an update is made to the data in the record, the system will be responsible for expiring the old record and creating a new record with the updated data. 
	"eval_criteria_sect_code" varchar(10)	 NOT NULL,    -- eval_criteria_sect_code: Is a foreign key to eval_criteria_sect_code: Objective Filter Level Code defines a set of filter levels that an objective can be defined for: Values are:  	- Coarse Filter 	- Medium Filter 	- Fine Filter 	- Risk Class & Location 	- Burn Development and Feasibility 	- Collective Impact
	"weighted_rank" decimal(5,2) NOT NULL,    -- Weighted Rank is a rank assigned to a criteria. Every criteria has a rank, and that rank is weighted.  No two criteria have the same weighted rank. The current weighted ranks range from 1 (lowest rank) to 12 (highest rank).
	"display_order" decimal(5) NOT NULL DEFAULT 0,    -- Display Order is the order in which the criteria should be displayed in an interface.
	"revision_count" decimal(10) NOT NULL DEFAULT 0,    -- REVISION_COUNT is the number of times that the row of data has been changed. The column is used for optimistic locking via application code.
	"create_user" varchar(64)	 NOT NULL,    -- CREATE_USER is an audit column that indicates the user that created the record.
	"create_date" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP,    -- CREATE_DATE is the date and time the row of data was created.
	"update_user" varchar(64)	 NOT NULL,    -- UPDATE_USER is an audit column that indicates the user that updated the record.
	"update_date" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP    -- UPDATE_DATE is the date and time the row of data was updated.
)
TABLESPACE	PG_DEFAULT
;

/* Create Table Comments, Sequences for Autonumber Columns */

COMMENT ON COLUMN "wfprev"."evaluation_criteria"."evaluation_criteria_guid"
	IS 'evaluation_criteria_guid is a unique identifier for the record.'
;

COMMENT ON COLUMN "wfprev"."evaluation_criteria"."project_type_code"
	IS 'project_type_code: Is a foreign key to project_type_code: Project Type Code defines the type of the project.  Values are:   	- Fuel Management  	- Cultural & Prescribed Fire'
;

COMMENT ON COLUMN "wfprev"."evaluation_criteria"."criteria_label"
	IS 'Criteria Label is a brief statement of a fire prevention objective that is being evaluated.'
;

COMMENT ON COLUMN "wfprev"."evaluation_criteria"."system_start_timestamp"
	IS 'System Start Timestamp is the date and time with millisecond accuracy when the record becomes effective.   The System Start Timestamp and System End Timestamp fields are managed as a set by the system and is not exposed to the end user. When an update is made to the data in the record, the system will be responsible for expiring the old record and creating a new record with the updated data. '
;

COMMENT ON COLUMN "wfprev"."evaluation_criteria"."system_end_timestamp"
	IS 'System End Timestamp is the date and time with millisecond accuracy when the record becomes effective. The current instance of the record will be set to Dec 31, 9999 by default.  The System Start Timestamp and System End Timestamp fields are managed as a set by the system and is not exposed to the end user. When an update is made to the data in the record, the system will be responsible for expiring the old record and creating a new record with the updated data. '
;

COMMENT ON COLUMN "wfprev"."evaluation_criteria"."eval_criteria_sect_code"
	IS 'eval_criteria_sect_code: Is a foreign key to eval_criteria_sect_code: Objective Filter Level Code defines a set of filter levels that an objective can be defined for: Values are:  	- Coarse Filter 	- Medium Filter 	- Fine Filter 	- Risk Class & Location 	- Burn Development and Feasibility 	- Collective Impact'
;

COMMENT ON COLUMN "wfprev"."evaluation_criteria"."weighted_rank"
	IS 'Weighted Rank is a rank assigned to a criteria. Every criteria has a rank, and that rank is weighted.  No two criteria have the same weighted rank. The current weighted ranks range from 1 (lowest rank) to 12 (highest rank).'
;

COMMENT ON COLUMN "wfprev"."evaluation_criteria"."display_order"
	IS 'Display Order is the order in which the criteria should be displayed in an interface.'
;

COMMENT ON COLUMN "wfprev"."evaluation_criteria"."revision_count"
	IS 'REVISION_COUNT is the number of times that the row of data has been changed. The column is used for optimistic locking via application code.'
;

COMMENT ON COLUMN "wfprev"."evaluation_criteria"."create_user"
	IS 'CREATE_USER is an audit column that indicates the user that created the record.'
;

COMMENT ON COLUMN "wfprev"."evaluation_criteria"."create_date"
	IS 'CREATE_DATE is the date and time the row of data was created.'
;

COMMENT ON COLUMN "wfprev"."evaluation_criteria"."update_user"
	IS 'UPDATE_USER is an audit column that indicates the user that updated the record.'
;

COMMENT ON COLUMN "wfprev"."evaluation_criteria"."update_date"
	IS 'UPDATE_DATE is the date and time the row of data was updated.'
;

/* Create Primary Keys, Indexes, Uniques, Checks */

ALTER TABLE "wfprev"."evaluation_criteria" ADD CONSTRAINT "evcrit_pk"
	PRIMARY KEY ("evaluation_criteria_guid")
;

ALTER TABLE "wfprev"."evaluation_criteria" ADD CONSTRAINT "evcrit_uk" UNIQUE ("project_type_code","criteria_label","system_start_timestamp","system_end_timestamp")
;

CREATE INDEX "evcrit_ecscd_idx" ON "wfprev"."evaluation_criteria" ("eval_criteria_sect_code" ASC)
;

CREATE INDEX "evcrit_prjtcd_idx" ON "wfprev"."evaluation_criteria" ("project_type_code" ASC)
;

/* Create Foreign Key Constraints */

ALTER TABLE "wfprev"."evaluation_criteria" ADD CONSTRAINT "evcrit_ecscd_fk"
	FOREIGN KEY ("eval_criteria_sect_code") REFERENCES "wfprev"."eval_criteria_sect_code" ("eval_criteria_sect_code") ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE "wfprev"."evaluation_criteria" ADD CONSTRAINT "evcrit_prjtcd_fk"
	FOREIGN KEY ("project_type_code") REFERENCES "wfprev"."project_type_code" ("project_type_code") ON DELETE No Action ON UPDATE No Action
;